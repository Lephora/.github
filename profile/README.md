# 破茧作业


## Lephora电子商城



迭代计划：
 + 业务：
    1. 前端包含两个页面，详情页，下单页，通过下单按钮跳转
    2. 后端提供API接口
 + 技术：
    1. 基本开发脚手架（前端选型Vue3 + axios，后端springboot3.0.3 + JPA）
    2. 基于前后端分离的完整的协同开发/发布模式
    3. 完整的测试策略
    4. 后端采用代码架构采用DDD领域驱动和CQRS命令查询职责分离模式
 + 基础设施：
    1. 数据库采用关系型postgres
    2. 流水线采用jenkins
    3. 服务器


开发/发布模式：

+ 原则： 契约先行。与先开发好后端接口再生成API文档的模式不同，开发过程中，应该先分析需求内容，约定好契约，前后端再分别基于契约进行开发。

+ 实践：
    + openapi独立在前后端项目仓库之外
    + 开发过程中，先发布openapi，前端使用orval自动生成axios代码，以及prism生成mock服务，后端使用契约测试cover接口schema校验
    + dev环境下，开发前，先发布openapi。开发完毕后，发布代码，ci运行端到端测试以及基于openapi的branch:master契约测试，获得契约报告
    + prod环境下，发布新版本v1.0.0前，给当前版本openapi打上tag为v1.0.0，ci基于openapi的tag:v1.0.0进行契约测试，测试成功才能成功发布，每个版本的服务，都会对应一个由开发人员商议和发布的openapi版本
